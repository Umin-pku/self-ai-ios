<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Self–AI Task</title>

<style>
body{
font-family:system-ui,-apple-system;
background:#f6f7fb;
margin:0;
padding:20px;
}

.card{
max-width:900px;
margin:auto;
background:white;
border-radius:16px;
padding:24px;
box-shadow:0 10px 25px rgba(0,0,0,.08);
}

h2{margin-top:0}

.highlight{
background:#ffd84d;
padding:0 6px;
border-radius:6px;
font-weight:600;
}

.canvas{
position:relative;
height:360px;
border-radius:12px;
border:1px solid #ddd;
margin:20px 0;
overflow:hidden;
}

.circle{
position:absolute;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-weight:700;
color:white;
user-select:none;
touch-action:none;
}

#self{background:rgba(66,133,244,.45);border:4px solid #4285f4}
#ai{background:rgba(52,168,83,.45);border:4px solid #34a853}

.slider{width:100%}

input{
width:100%;
padding:10px;
border-radius:10px;
border:1px solid #ccc;
margin-top:6px;
}

button{
padding:12px 20px;
border:none;
border-radius:10px;
font-weight:700;
cursor:pointer;
}

#submit{background:#16a34a;color:white}
#reset{background:#111827;color:white;margin-left:10px}

.end{
text-align:center;
padding:80px 20px;
font-size:22px;
display:none;
}

</style>
</head>

<body>

<div class="card" id="main">

<h2>Please read the instructions carefully</h2>

<p>
<span class="highlight">Adjust</span> the size of the two circles to represent how large you feel your Self and AI are.
<span class="highlight">Drag</span> the circles (left–right only) to represent your perceived relationship.
More overlap means a closer relationship.
</p>

<div class="canvas" id="canvas">
<div class="circle" id="self">Self</div>
<div class="circle" id="ai">AI</div>
</div>

Self
<input type="range" id="selfSize" min="60" max="220" value="100" class="slider">

AI
<input type="range" id="aiSize" min="60" max="220" value="100" class="slider">

<div style="margin-top:14px">
Birth (6 digits)
<input id="birth" placeholder="e.g., 010918" maxlength="6">
<div style="font-size:12px;color:#666;margin-top:4px">Birth is used for research purposes only.</div>
</div>

<div style="margin-top:20px">
<button id="submit">Submit</button>
<button id="reset">Reset</button>
</div>

</div>

<div class="end" id="end">
✅ Thank you for completing this task.<br><br>
Please return to the questionnaire to continue.
</div>

<script>
const canvas=document.getElementById("canvas");
const self=document.getElementById("self");
const ai=document.getElementById("ai");

let selfX=240, aiX=460;

function update(){
const sr=+selfSize.value;
const ar=+aiSize.value;

self.style.width=self.style.height=sr*2+"px";
ai.style.width=ai.style.height=ar*2+"px";

self.style.left=(selfX-sr)+"px";
ai.style.left=(aiX-ar)+"px";

self.style.top="120px";
ai.style.top="120px";
}

selfSize.oninput=aiSize.oninput=update;

function drag(el,isSelf){
el.onpointerdown=e=>{
el.setPointerCapture(e.pointerId);
el.onpointermove=ev=>{
if(isSelf) selfX=ev.offsetX+el.offsetLeft+el.offsetWidth/2;
else aiX=ev.offsetX+el.offsetLeft+el.offsetWidth/2;
update();
}
}
}

drag(self,true);
drag(ai,false);

update();

function overlap(){
const sr=+selfSize.value;
const ar=+aiSize.value;
const d=Math.abs(selfX-aiX);
if(d>=sr+ar) return 0;
if(d<=Math.abs(sr-ar)) return Math.PI*Math.min(sr,ar)**2;
const x=(d*d-ar*ar+sr*sr)/(2*d);
const h=Math.sqrt(sr*sr-x*x);
return sr*sr*Math.acos(x/sr)+ar*ar*Math.acos((d-x)/ar)-d*h;
}

submit.onclick=()=>{
if(birth.value.length!==6){alert("Please enter 6-digit birth.");return;}

const sr=+selfSize.value;
const ar=+aiSize.value;

const ov=overlap();
const overlapPct=Math.round(ov/(Math.PI*Math.min(sr,ar)**2)*100);

const dist=Math.abs(selfX-aiX)/Math.sqrt(canvas.clientWidth**2+canvas.clientHeight**2);

const rel=(ar-sr)/(ar+sr);

const payload={
类型:"自我AI连续IOS结果",
自我大小:sr,
AI大小:ar,
重叠程度:overlapPct+"%",
心理距离:dist,
相对大小:rel,
生日6位:birth.value,
时间戳:Date.now()
};

window.parent.postMessage(payload,"*");

document.getElementById("main").style.display="none";
document.getElementById("end").style.display="block";

setTimeout(()=>{
location.href="https://www.credamo.com/s/uIf2quano";
},1800);
}

reset.onclick=()=>location.reload();
</script>

</body>
</html>
